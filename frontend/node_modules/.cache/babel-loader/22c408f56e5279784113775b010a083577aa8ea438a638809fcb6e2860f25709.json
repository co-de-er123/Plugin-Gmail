{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Hp\\\\CascadeProjects\\\\gmail-capsyl-plugin\\\\frontend\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [user, setUser] = useState(null);\n  const [error, setError] = useState(null);\n  const [emails, setEmails] = useState([]);\n  useEffect(() => {\n    const fetchUser = async () => {\n      try {\n        const response = await fetch('http://localhost:8080/user', {\n          credentials: 'include'\n        });\n        if (response.ok) {\n          const data = await response.json();\n          setUser(data);\n        } else {\n          setUser(null);\n        }\n      } catch (err) {\n        setError('Could not connect to the backend. Is it running?');\n        setUser(null);\n      }\n    };\n    fetchUser();\n  }, []);\n  const login = () => {\n    window.location.href = 'http://localhost:8080/oauth2/authorization/google';\n  };\n  const logout = async () => {\n    await fetch('http://localhost:8080/logout', {\n      method: 'POST',\n      credentials: 'include'\n    });\n    setUser(null);\n    setEmails([]);\n  };\n  const getEmails = async () => {\n    try {\n      const response = await fetch('http://localhost:8080/api/emails', {\n        credentials: 'include'\n      });\n      if (response.ok) {\n        const data = await response.json();\n        setEmails(data);\n      } else {\n        console.error(\"Failed to fetch emails\");\n      }\n    } catch (err) {\n      console.error(\"Error fetching emails:\", err);\n    }\n  };\n  const handleEmailClick = async email => {\n    try {\n      const response = await fetch(`http://localhost:8080/api/attachments/${email.id}`, {\n        credentials: 'include'\n      });\n      if (response.ok) {\n        const attachments = await response.json();\n        if (attachments.length === 0) {\n          alert('This email has no attachments.');\n          return;\n        }\n        attachments.forEach(downloadAttachment);\n      } else {\n        console.error(\"Failed to fetch attachments\");\n        alert('Could not fetch attachments.');\n      }\n    } catch (err) {\n      console.error(\"Error fetching attachments:\", err);\n      alert('An error occurred while fetching attachments.');\n    }\n  };\n  const downloadAttachment = ({\n    filename,\n    mimeType,\n    data\n  }) => {\n    const byteCharacters = atob(data.replace(/-/g, '+').replace(/_/g, '/'));\n    const byteNumbers = new Array(byteCharacters.length);\n    for (let i = 0; i < byteCharacters.length; i++) {\n      byteNumbers[i] = byteCharacters.charCodeAt(i);\n    }\n    const byteArray = new Uint8Array(byteNumbers);\n    const blob = new Blob([byteArray], {\n      type: mimeType\n    });\n    const link = document.createElement('a');\n    link.href = window.URL.createObjectURL(blob);\n    link.download = filename;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: /*#__PURE__*/_jsxDEV(\"header\", {\n        className: \"App-header\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: error\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 64\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 33\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"App\",\n    children: /*#__PURE__*/_jsxDEV(\"header\", {\n      className: \"App-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Gmail Plugin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 9\n      }, this), user && user.name !== 'Guest' ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Welcome, \", user.name, \"!\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: logout,\n          children: \"Logout\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: getEmails,\n          children: \"Get Recent Emails with Attachments\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n          className: \"email-list\",\n          children: emails.map(email => /*#__PURE__*/_jsxDEV(\"li\", {\n            onClick: () => handleEmailClick(email),\n            children: email.subject\n          }, email.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: login,\n        children: \"Login with Google\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"cSiftjyug8sLihYPDFLKdnNru/k=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","App","_s","user","setUser","error","setError","emails","setEmails","fetchUser","response","fetch","credentials","ok","data","json","err","login","window","location","href","logout","method","getEmails","console","handleEmailClick","email","id","attachments","length","alert","forEach","downloadAttachment","filename","mimeType","byteCharacters","atob","replace","byteNumbers","Array","i","charCodeAt","byteArray","Uint8Array","blob","Blob","type","link","document","createElement","URL","createObjectURL","download","body","appendChild","click","removeChild","className","children","fileName","_jsxFileName","lineNumber","columnNumber","name","onClick","map","subject","_c","$RefreshReg$"],"sources":["C:/Users/Hp/CascadeProjects/gmail-capsyl-plugin/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport './App.css';\n\nfunction App() {\n  const [user, setUser] = useState(null);\n  const [error, setError] = useState(null);\n  const [emails, setEmails] = useState([]);\n\n  useEffect(() => {\n    const fetchUser = async () => {\n      try {\n        const response = await fetch('http://localhost:8080/user', { credentials: 'include' });\n        if (response.ok) {\n          const data = await response.json();\n          setUser(data);\n        } else {\n          setUser(null);\n        }\n      } catch (err) {\n        setError('Could not connect to the backend. Is it running?');\n        setUser(null);\n      }\n    };\n    fetchUser();\n  }, []);\n\n  const login = () => {\n    window.location.href = 'http://localhost:8080/oauth2/authorization/google';\n  };\n\n  const logout = async () => {\n    await fetch('http://localhost:8080/logout', { method: 'POST', credentials: 'include' });\n    setUser(null);\n    setEmails([]);\n  };\n\n  const getEmails = async () => {\n    try {\n      const response = await fetch('http://localhost:8080/api/emails', { credentials: 'include' });\n      if (response.ok) {\n        const data = await response.json();\n        setEmails(data);\n      } else {\n        console.error(\"Failed to fetch emails\");\n      }\n    } catch (err) {\n      console.error(\"Error fetching emails:\", err);\n    }\n  };\n\n  const handleEmailClick = async (email) => {\n    try {\n      const response = await fetch(`http://localhost:8080/api/attachments/${email.id}`, { credentials: 'include' });\n      if (response.ok) {\n        const attachments = await response.json();\n        if (attachments.length === 0) {\n          alert('This email has no attachments.');\n          return;\n        }\n        attachments.forEach(downloadAttachment);\n      } else {\n        console.error(\"Failed to fetch attachments\");\n        alert('Could not fetch attachments.');\n      }\n    } catch (err) {\n      console.error(\"Error fetching attachments:\", err);\n      alert('An error occurred while fetching attachments.');\n    }\n  };\n\n  const downloadAttachment = ({ filename, mimeType, data }) => {\n    const byteCharacters = atob(data.replace(/-/g, '+').replace(/_/g, '/'));\n    const byteNumbers = new Array(byteCharacters.length);\n    for (let i = 0; i < byteCharacters.length; i++) {\n      byteNumbers[i] = byteCharacters.charCodeAt(i);\n    }\n    const byteArray = new Uint8Array(byteNumbers);\n    const blob = new Blob([byteArray], { type: mimeType });\n\n    const link = document.createElement('a');\n    link.href = window.URL.createObjectURL(blob);\n    link.download = filename;\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  };\n\n  if (error) {\n    return <div className=\"App\"><header className=\"App-header\"><p>{error}</p></header></div>;\n  }\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <h1>Gmail Plugin</h1>\n        {user && user.name !== 'Guest' ? (\n          <div>\n            <p>Welcome, {user.name}!</p>\n            <button onClick={logout}>Logout</button>\n            <hr />\n            <button onClick={getEmails}>Get Recent Emails with Attachments</button>\n            <ul className=\"email-list\">\n              {emails.map((email) => (\n                <li key={email.id} onClick={() => handleEmailClick(email)}>\n                  {email.subject}\n                </li>\n              ))}\n            </ul>\n          </div>\n        ) : (\n          <button onClick={login}>Login with Google</button>\n        )}\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}